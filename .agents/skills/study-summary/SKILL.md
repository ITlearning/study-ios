---
name: study-summary
description: Saves learning notes from the current conversation as a markdown file. Includes learner's own rules, misconceptions, and seed codes for review.
---

# study-summary - Learning Notes Generator

Summarizes and saves learning notes from the current conversation. Captures the learner's own rules, mistakes, and code examples for future review.
(현재 대화의 학습 내용을 요약하고 저장한다. 학습자가 직접 작성한 규칙, 실수, 코드 예제를 포함한다.)

## Instructions

### Step 0: Language Selection

Ask the user to choose a language at the start using a **selection flow**, not free-form text input.
(스킬 시작 시 자유 입력이 아니라 **선택형 방식**으로 언어를 받는다)

- **한국어** - 한국어로 노트를 작성합니다
- **English** - Write notes in English

Use platform-specific selection behavior:
- **Codex CLI**: use native option selection (`request_user_input` with 2 options) when available. If unavailable, show numbered choices and ask for `1` or `2`.
- **Claude Code**: use native option selection UI when available. If unavailable, show numbered choices.
- **Gemini CLI**: use native option selection UI when available. If unavailable, show numbered choices.

Choice mapping: `1` → 한국어, `2` → English

Use the selected language for the note content and all communication. Code and Swift keywords stay in English.
(선택한 언어로 노트 내용과 소통을 진행한다. 코드와 Swift 키워드는 영어 그대로 유지한다.)

### Step 1: Analyze Conversation

Scan the current conversation to identify:
(현재 대화를 스캔하여 다음을 파악한다)

**If the conversation used the Core Loop format (Phase 1-3):**
(Core Loop 형식의 대화였다면)

- Mystery Hook code and the learner's initial prediction
- Each SEED code from the Core Loop cycles
- PREDICT results: which gates passed, which failed
- REVEAL explanations and ASCII diagrams
- RESTATE summaries from the learner
- Anchor output: the learner's "if X, then Y" rules
- Anchor output: the learner's stated misconception/confusion
- Sources cited (SE proposals, WWDC, Apple docs)

**If the conversation used the old format or free-form discussion:**
(이전 형식이나 자유 토론이었다면)

- Topics covered
- Key concepts explained
- Code examples shown
- Questions asked and answers given
- Areas where the learner struggled or excelled

### Step 2: Confirm Topics

Use AskUserQuestion to confirm what to include:
(AskUserQuestion으로 포함할 내용을 확인한다)

- **전체 정리 / Everything** - 이 대화에서 학습한 모든 내용을 정리 / Summarize all topics
- **마지막 주제만 / Last topic only** - 가장 최근에 다룬 주제만 정리 / Only the most recent topic

### Step 3: Generate Note

Create a Markdown note. Use the appropriate structure based on what was found in Step 1.
(마크다운 노트를 생성한다. Step 1에서 파악한 내용에 따라 적절한 구조를 사용한다.)

File path: `notes/YYYY-MM-DD-<topic-in-english>.md`

**If Core Loop session was detected:**
(Core Loop 세션이 감지되었으면)

```markdown
# <Topic>

> Date: YYYY-MM-DD

## My Rules (from Anchor)

1. if X, then Y
2. if X, then Y
3. if X, then Y

## Where I Got Confused

- (learner's own description from Anchor phase)

## Key Mechanisms

(ASCII diagrams and explanations from REVEAL steps)

## Seed Codes (for review)

### Cycle 1 (easy)

```swift
// seed code from cycle 1
```

Answer: ...

### Cycle 2 (medium)

```swift
// seed code from cycle 2
```

Answer: ...

### Cycle 3 (hard)

```swift
// seed code from cycle 3
```

Answer: ...

## Sources

- SE-XXXX: ...
- WWDC session: ...
- Apple docs: ...

## Review Questions

1. (generated from the session's key concepts)
2. ...
3. ...

---
*Generated by /study-summary*
```

**If old format or free-form session:**
(이전 형식이나 자유 토론 세션이면)

```markdown
# <Topic>

> Date: YYYY-MM-DD

## Key Concepts

1. **Concept 1**: one-line explanation
2. **Concept 2**: one-line explanation
3. **Concept 3**: one-line explanation

## Code Examples

```swift
// key code examples from the session
```

## Summary

(3-5 lines summarizing the core content)

## Review Questions

1. ...
2. ...
3. ...

---
*Generated by /study-summary*
```

### Step 4: Save Note

Use the Write tool to save the note to the `notes/` directory.
(Write tool을 사용하여 `notes/` 디렉토리에 노트를 저장한다.)

### Step 5: Update Learning Progress

Record learning progress in memory using `mcp__plugin_everything-claude-code-ios_memory__add_observations` (or `create_entities` if the entity doesn't exist yet):
(memory에 학습 진도를 기록한다)

Entity: `SwiftLearningProgress`

**If Core Loop session:**
(Core Loop 세션이었으면)

```
Observations:
- "YYYY-MM-DD: <topic> completed (<level: beginner/intermediate/advanced>)"
- "YYYY-MM-DD: <topic> misconception: <specific description from Anchor>"
- "YYYY-MM-DD: <topic> gates: cycle1 <pass/fail>, cycle2 <pass/fail>, cycle3 <pass/fail>"
```

**If old format session:**
(이전 형식 세션이었으면)

```
Observations:
- "YYYY-MM-DD: <topic> completed (<estimated level>)"
- "YYYY-MM-DD: <topic> weak area: <specific concept if identified>"
```

### Step 6: Wrap Up

After saving, inform the user:
(저장 완료 후 안내)

```
Notes saved: notes/YYYY-MM-DD-<topic>.md

Progress recorded:
- Completed: <topic> (<level>)
- Misconception tracked: <brief description>

Continue learning with /swift-study, or review with /swift-quiz.
```

### Rules

1. **Use the selected language** - from Step 0. Code in English. (선택한 언어로 작성)
2. **Prioritize learner's own words** - Anchor rules and misconceptions should be quoted from the learner, not rewritten. (학습자 본인의 표현을 우선한다)
3. **Include seed codes** - all cycle code snippets for later review. (seed 코드를 모두 포함한다)
4. **Specific misconception tracking** - not "weak area: concurrency" but "misconception: thought state preserved across await". (구체적인 misconception 기록)
5. **Review questions required** - at least 3 self-check questions. (복습 질문 최소 3개)
6. **Progress tracking required** - always save to memory. (진도 기록 필수)
7. **Graceful fallback** - work with old-format sessions too. (이전 형식 세션도 지원)
8. **No emojis** - clean Markdown only. (이모지 사용 금지)
